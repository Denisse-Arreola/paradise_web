

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Paradise - Administrador</title>
    <link rel="stylesheet" href="../css/cssBase.css" />
</head>

<body>
    <header>

        <!--Encabezado-->
        Titulo
    </header>

 




    <section class="sectionPrincipal">
    
        <article id="barAdmin">
            <table class="upBar">

                <tr>

                    <td> <button onclick="turnOnPnlConsult()">Consultar</button> </td>
                    <td>  <button onclick="turnOnPnlAdd()">Registrar</button>  </td>
                    <td>  <button onclick="turnOnPnlModify()">Modificar</button>  </td>

                </tr>



            </table>

        </article>


        <nav>
            Lista de opciones (Puede estar escondida.) <br />


            <ul>

                <li>
                    <a >Esquemas (Opción predefinida)</a>
                </li>

                <li>
                    <a>Reservaciones</a>
                </li>

                <li>
                    <a href="HTML_ADMIN_AGENTES.html">Agentes</a>
                </li>

                <li>
                    <a href="HTML_ADMIN_LUGARES.html">Lugares</a>

                    <ol>
                        Provedores
                    </ol>
                    <ol>
                        Municipios
                    </ol>
                </li>

                <li>
                    <a>Clientes</a>
                </li>

            </ul>
        </nav>



        <article id="artMain">


            <section class="consultPanel" id="pnlConsult" style="display:Block">
                <section class='searchForm'>
                    <input type='search' placeholder='B&uacute;squeda de lugares.'  id='id_lugar'>
                    <input type='button' value='Buscar' onclick="buscarLugar(true)" id="btnM" style="display:none">
                    <input type='button' value='Buscar' onclick="buscarLugar(false)" id="btnS" style="display:block">
                </section>               
            </section>

            <section class="addPanel" id="pnlAdd" style="display:none">
                <section class='registerSection' name='searchAdminForm'>
                    <label id="lblNum" style="display:none"> Número del Lugar:</label> <input id="tbNum" style="display:none" type="text" disabled><br/>
                    Nombre del Lugar: <input type='text'  id='txtNombreLugar' maxlength="30" autofocus required><br/>
                    Costo del Lugar: <input type='number' id="txtCostoLugar" required/><br/>
                    Capacidad del Lugar: <input type='number' id="txtCapacidadLugar" required/><br/>                    
                    Descripción del Lugar: <input type='text' id="txtDescLugar" maxlength="120"/> 
                    
                    <input type="button" id="btnSend" style="float:right;display:block" value="Enviar" onclick="registrarLugar(true)"/> <br />
                    <input type="button" id="btnModify" style="float:right;display:none" value="Enviar" onclick="registrarLugar(false)" /> <br />



                    <!--<button onclick="document.getElementById('intPnlDirection').style.display='block'">
                        Añadir Dirección 
                    </button> --Elemento tipo barra desplegable al momento del click desprender el resto del formulario. 


                    <section style="display:none" id="intPnlDirection">
                        Calle: <input type='text' name='txtCalleDirec'><br />
                        Número interior: <input type='text' name='txtNumIntDirec'><br />
                        Número Exterior: <input type='number' name="txtNumExtDirec" /><br />
                        Código Postal: <input type='number' name="txtCP" /><br />
                        <input type="button" style="float:right" value="Enviar" /> <br />
                    </section>-->

                    <p id="msg">En proceso</p>

                </section>            
            </section>

            <section id="listLugar" style="display:none; width:100%;"></section>

        </article>
        
    </section>
    

    <script>


        function turnOnPnlConsult() {
            document.getElementById("listLugar").innerHTML = "";
            document.getElementById('pnlConsult').style.display = "block";
            document.getElementById('pnlAdd').style.display = "None";         
            document.getElementById("listLugar").style.display = "none";

            document.getElementById('btnM').style.display = "none";
            document.getElementById('btnS').style.display = "block";
        }


        function turnOnPnlAdd() {
            document.getElementById("listLugar").innerHTML = "";
            document.getElementById('pnlConsult').style.display = "None";
            document.getElementById('pnlAdd').style.display = "block";           
            document.getElementById("listLugar").style.display = "none";
            
        }

        function turnOnPnlModify() {
            document.getElementById("listLugar").innerHTML = "";
            document.getElementById('pnlConsult').style.display = "block";
            document.getElementById('pnlAdd').style.display = "None";        
            document.getElementById("listLugar").style.display = "none";            
            document.getElementById('btnM').style.display = "block";
            document.getElementById('btnS').style.display = "none";
        }

        function registrarLugar(res) {
            document.getElementById("listLugar").innerHTML = "";

            var lugarOb = null;

        if (res==true){

               lugarOb = {
                nombre: document.getElementById("txtNombreLugar").value,
                desc: document.getElementById("txtDescLugar").value,
                costo: document.getElementById("txtCostoLugar").value,
                capacidad: document.getElementById("txtCapacidadLugar").value,
                type : true
                
                };
        } else {

               lugarOb = {
                numero :parseInt( document.getElementById("tbNum").value),
                nombre: document.getElementById("txtNombreLugar").value,
                desc: document.getElementById("txtDescLugar").value,
                costo: document.getElementById("txtCostoLugar").value,
                capacidad: document.getElementById("txtCapacidadLugar").value,
                type : false
            };
        }
            

            var ajax = new XMLHttpRequest();
            ajax.onreadystatechange= function () {
                if (ajax.readyState== 4 && ajax.status==200){
                    document.getElementById("msg").innerHTML = ajax.responseText;
                }
            };

            //ajax.open("GET", "../php/sendLugar.php?b="+JSON.stringify(lugarOb), true);
            ajax.open("GET", "../php/registerUpdateLugar.php?b=" + JSON.stringify(lugarOb), true);
            ajax.send();
        }


        function buscarLugar(res) {
            document.getElementById("listLugar").innerHTML = "";


            var ajax = new XMLHttpRequest();

            var searchForm = null;

            if (res == true) {
                searchForm = {
                    search: document.getElementById("id_lugar").value,
                    type : true
                };
            } else {
                searchForm = {
                    search: document.getElementById("id_lugar").value,
                    type: false
                };
            }
            
            ajax.onreadystatechange = function () {
                if (ajax.readyState == 4 && ajax.status == 200) {
                    document.getElementById("listLugar").style.display = "block";
                    document.getElementById("listLugar").innerHTML = ajax.responseText;
                }
            };


            ajax.open("GET", "../php/busquedaLugar.php?b=" +JSON.stringify(searchForm), true);
            ajax.send();

        }

        function modifyLugar(a) {
            turnOnPnlAdd();
            document.getElementById("btnModify").style.display = "block";
            document.getElementById("btnSend").style.display = "none";                        



            document.getElementById("txtNombreLugar").value=a.nombre;
            document.getElementById("txtDescLugar").value = a.desc;
            document.getElementById("txtCostoLugar").value = a.costo;
            document.getElementById("txtCapacidadLugar").value = a.capacidad;


            document.getElementById("tbNum").style.display = "block";
            document.getElementById("lblNum").style.display = "block";
            document.getElementById("tbNum").value = a.numero;
            
        }

    </script>

</body>
</html>