
<html lang="en">
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../css/CSS_CLIENTE_LUGARES.css" type="text/css">
    <meta meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Lugares y Salones - Paradise</title>
</head>
<body onload="lugaresList(); cargarOPE(); cargarOPTL();">
    <nav class="NavOficial">
        <img src="../img/logoOficial.png" alt="Logotipo" width="30%" class="logoNav" />

        <section class="pruebaMenu">
            <article class="pMT"><a href="../index.html" ;>INICIO</a></article>
            <article class="pMTx"><a href="construccion.html" ;>¿QUIÉNES SOMOS?</a></article>
            <article class="pMT3"><a href="HTML_LUGARES.html" ;>LUGARES Y SALONES</a></article>
            <article class="pMT2"><a href="construccion.html" ;>PROMOCIONES</a></article>
            <article class="pMTxt"><a href="HTML_SIGN_IN.html" ;>INICIAR SESION</a></article>
        </section>
        <br />
        <section class="barraBusqueda">
            <input type="text" id="searchterm" class="busqueda" placeholder="¿Qué estás buscando?" />
            <button type="button" id="search" class="boton">Buscar</button>
        </section>
        <br />

    </nav>
    <br />

    <main>
        <section class="secPrincipal">
                La ultima promoción o novedad
        </section>
        <br />

        <section class="lugLista">
            <section class="filtros">
                ¿Alguna idea en mente?
                <form>
                    <select name="ciudad" id="ciudad" required>
                            <option value="TIJ">Tijuana</option>
                            <option value="ESE">Ensenada</option>
                            <option value="ROS">Rosarito</option>
                            <option value="TEC">Tecate</option>
                            <option value="MXL">Mexicali</option>
                    </select>

                        <select id="opsel">

                        </select>

                    <section id="espBox">

                    </section>

                    

                    <input type="submit" onclick="searchSp()"/>
                </form>
            </section>
            <section class="lugares" id="lugares">
                Las lista de lugares
            </section>
        </section>

        <script>

            function lugaresList()
            {
                
                var ajax = new XMLHttpRequest();

                caso = 1;

                ajax.onreadystatechange = function () {
                    if (ajax.status == 200 && ajax.readyState == 4)
                    {
                        console.log(ajax.responseText);
                        document.getElementById('lugares').innerHTML = ajax.responseText;
                    }
                }

                

                ajax.open("GET","../php/listaLugare.php?", true);
                ajax.send();
            }

            
            function cargarOPE()
            {

                var ajax = new XMLHttpRequest();
                caso = 1;

                ajax.onreadystatechange = function () {
                    if (ajax.status == 200 && ajax.readyState == 4) {
                        fillDataEsp(ajax.responseText);
                    }
                };

                ajax.open("get", "../php/filtrosLug.php?caso=" + caso, true);
                ajax.send();

            }

            function cargarOPTL()
            {

                var ajax = new XMLHttpRequest();
                caso = 2;

                ajax.onreadystatechange = function () {
                    if (ajax.status == 200 && ajax.readyState == 4) {
                        fillDataTl(ajax.responseText);
                    }
                };

                ajax.open("get", "../php/filtrosLug.php?caso=" + 2, true);
                ajax.send();

            }

            function fillDataEsp(ob)
            {
                var y=0;
                var arrayEspacios = JSON.parse(ob);

                var espSection = document.getElementById("espBox");

               

                var tabla = document.createElement("table");
                tabla.className="tablaBox";

                espSection.appendChild(tabla);
                

                while (arrayEspacios[y])
                {

                    var ckBox = document.createElement("input");
                    ckBox.setAttribute("type", "checkbox");
                    ckBox.setAttribute("class", "ckB");
                    ckBox.style.marginRight = "50px";

                    ckBox.value = arrayEspacios[y].num;

                    var lbl = document.createElement("Label");
                    lbl.innerHTML = arrayEspacios[y].nombre;

                    var td = document.createElement("td");
                    var tr = document.createElement("tr");

                    td.appendChild(ckBox);
                    td.appendChild(lbl);
                    
                    tr.appendChild(td);
                    tabla.appendChild(tr);

                    
                    y++;
                }
            }

            function fillDataTl(ob)
            {
                var y=0;
                var arrayEspacios = JSON.parse(ob);

                var tlSection = document.getElementById("opsel");

                console.log(arrayEspacios);

                while (arrayEspacios[y])
                {

                    var option = document.createElement("option");
                    option.setAttribute("class", "opsel");
                    option.style.marginRight = "50px";

                    option.value = arrayEspacios[y].num;

                    option.innerHTML = arrayEspacios[y].nombre;

                    tlSection.appendChild(option);
                    y++;
                }
            }





            //$_SERVER['PHP_SELF'];


        </script>

    </main>

</body>
</html>